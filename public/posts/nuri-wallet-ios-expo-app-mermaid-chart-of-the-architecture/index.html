<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Nuri Wallet iOS Expo App Mermaid Chart of the Architecture | Emino Blog - AI-Optimized Tech Insights</title><meta name=keywords content="email-post,photos"><meta name=description content="Based on my analysis of the codebase, including the README.md and the main
App.tsx file, I&rsquo;ll first provide a detailed explanation of the codebase.
Then, I&rsquo;ll include a Mermaid chart representing the application
architecture.
Codebase Explanation
This is a React Native Expo application called &ldquo;Nuri&rdquo; focused on
passkey-based Bitcoin seed encryption. It uses WebAuthn passkeys with the
PRF (Pseudo-Random Function) extension to securely encrypt Bitcoin seeds,
store them in iCloud Keychain, and enable recovery across multiple
passkeys. The app is designed for iOS 16+ devices with biometric
authentication (Face ID/Touch ID) and iCloud Keychain enabled."><meta name=author content="Emino"><link rel=canonical href=https://emino.app/posts/nuri-wallet-ios-expo-app-mermaid-chart-of-the-architecture/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://emino.app/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://emino.app/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://emino.app/favicon-32x32.png><link rel=apple-touch-icon href=https://emino.app/apple-touch-icon.png><link rel=mask-icon href=https://emino.app/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://emino.app/posts/nuri-wallet-ios-expo-app-mermaid-chart-of-the-architecture/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://emino.app/posts/nuri-wallet-ios-expo-app-mermaid-chart-of-the-architecture/"><meta property="og:site_name" content="Emino Blog - AI-Optimized Tech Insights"><meta property="og:title" content="Nuri Wallet iOS Expo App Mermaid Chart of the Architecture"><meta property="og:description" content="Based on my analysis of the codebase, including the README.md and the main App.tsx file, I’ll first provide a detailed explanation of the codebase. Then, I’ll include a Mermaid chart representing the application architecture.
Codebase Explanation This is a React Native Expo application called “Nuri” focused on passkey-based Bitcoin seed encryption. It uses WebAuthn passkeys with the PRF (Pseudo-Random Function) extension to securely encrypt Bitcoin seeds, store them in iCloud Keychain, and enable recovery across multiple passkeys. The app is designed for iOS 16+ devices with biometric authentication (Face ID/Touch ID) and iCloud Keychain enabled."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-08-28T08:30:02+00:00"><meta property="article:modified_time" content="2025-08-28T08:30:02+00:00"><meta property="article:tag" content="Email-Post"><meta property="article:tag" content="Photos"><meta name=twitter:card content="summary"><meta name=twitter:title content="Nuri Wallet iOS Expo App Mermaid Chart of the Architecture"><meta name=twitter:description content="Based on my analysis of the codebase, including the README.md and the main
App.tsx file, I&rsquo;ll first provide a detailed explanation of the codebase.
Then, I&rsquo;ll include a Mermaid chart representing the application
architecture.
Codebase Explanation
This is a React Native Expo application called &ldquo;Nuri&rdquo; focused on
passkey-based Bitcoin seed encryption. It uses WebAuthn passkeys with the
PRF (Pseudo-Random Function) extension to securely encrypt Bitcoin seeds,
store them in iCloud Keychain, and enable recovery across multiple
passkeys. The app is designed for iOS 16+ devices with biometric
authentication (Face ID/Touch ID) and iCloud Keychain enabled."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://emino.app/posts/"},{"@type":"ListItem","position":2,"name":"Nuri Wallet iOS Expo App Mermaid Chart of the Architecture","item":"https://emino.app/posts/nuri-wallet-ios-expo-app-mermaid-chart-of-the-architecture/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Nuri Wallet iOS Expo App Mermaid Chart of the Architecture","name":"Nuri Wallet iOS Expo App Mermaid Chart of the Architecture","description":"Based on my analysis of the codebase, including the README.md and the main App.tsx file, I\u0026rsquo;ll first provide a detailed explanation of the codebase. Then, I\u0026rsquo;ll include a Mermaid chart representing the application architecture.\nCodebase Explanation This is a React Native Expo application called \u0026ldquo;Nuri\u0026rdquo; focused on passkey-based Bitcoin seed encryption. It uses WebAuthn passkeys with the PRF (Pseudo-Random Function) extension to securely encrypt Bitcoin seeds, store them in iCloud Keychain, and enable recovery across multiple passkeys. The app is designed for iOS 16+ devices with biometric authentication (Face ID/Touch ID) and iCloud Keychain enabled.\n","keywords":["email-post","photos"],"articleBody":"Based on my analysis of the codebase, including the README.md and the main App.tsx file, I’ll first provide a detailed explanation of the codebase. Then, I’ll include a Mermaid chart representing the application architecture.\nCodebase Explanation This is a React Native Expo application called “Nuri” focused on passkey-based Bitcoin seed encryption. It uses WebAuthn passkeys with the PRF (Pseudo-Random Function) extension to securely encrypt Bitcoin seeds, store them in iCloud Keychain, and enable recovery across multiple passkeys. The app is designed for iOS 16+ devices with biometric authentication (Face ID/Touch ID) and iCloud Keychain enabled.\nKey Features Passkey Creation and Authentication: Users create and sign in with passkeys to derive encryption keys via PRF. Seed Encryption: Encrypts Bitcoin seeds using XChaCha20-Poly1305 with keys derived from PRF. Multi-Key Backup: Supports backups decryptable by multiple passkeys (version 3 format). iCloud Sync: Stores encrypted backups in iCloud Keychain with per-user namespaces. Hardware Security Key Support: For transaction approval (e.g., YubiKey), though PRF is limited on iOS for hardware keys. Recovery: Allows decryption using any associated passkey or guardian DEKs. Project Structure The codebase is organized as follows (based on the file listing and README):\nRoot Files: Configuration and entry points like App.tsx (main UI and logic), index.js (React Native entry), package.json, tsconfig.json, etc. lib/: Core utilities. crypto.ts: Handles key derivation (HKDF-SHA256), encryption (XChaCha20-Poly1305), PRF normalization. multikey.ts: Manages multi-key backups with key slots for multiple passkeys. recovery.ts: Functions for detecting backup versions and recovering seeds. inAppLocalhostServer.ts: Likely for in-app server (WIP). components/: Reusable components. LocalhostPRF.tsx: Component for localhost PRF server (work in progress). WebView Components: EmbeddedPRF.tsx: For domain-bound passkey authentication. CreatePasskeyWebView.tsx: For creating new passkeys. docs/: Extensive documentation and server examples (HTML files for testing PRF, PWA, etc.). scripts/: e.g., guardian-server.mjs for guardian features. assets/: App icons and splash screens. Main Logic (from App.tsx) The app’s core is in App.tsx, which manages the UI and wallet state. It includes:\nState management for PRF, DEK (Data Encryption Key), guardians, hardware keys, and backups. UI with steps for: creating passkeys, signing in, encrypting seeds, storing in iCloud, adding recovery keys, and recovering seeds. Integration with WebViews for passkey operations (domain-bound to passkey.nuri.com). Hardware key support for transaction approval (using NFC/USB keys). Recovery flow that handles single-key (v1) and multi-key (v3) backups, prompting users to select keys. Security and Limitations Encryption uses a master key encrypted in slots for each passkey. Backups are stored per-user in iCloud Keychain with unique services (e.g., com.nuri.seed.backup.Alice). Limitations: PRF is device-specific; cross-device recovery requires manual DEK sharing; iOS restricts PRF on hardware keys. Dependencies react-native-passkey: For WebAuthn. react-native-keychain: iCloud integration. @noble/hashes: Crypto primitives. Others like expo-random, react-native-webview. The codebase is a proof-of-concept with some WIP features (e.g., localhost PRF, guardian recovery). It’s MIT-licensed and emphasizes security warnings.\nMermaid Chart of the Architecture Below is a Mermaid flowchart representing the high-level architecture and flow. It shows the main components and how they interact in the encryption/recovery process.\ngraph TD A[User Interface - App.tsx] --\u003e|Create/Sign In| B[WebView Components] B --\u003e|Passkey Operations| C[Passkey API - react-native-passkey] A --\u003e|Encrypt/Decrypt| D[Crypto Library - lib/crypto.ts] D --\u003e|Key Derivation| E[PRF Extension] A --\u003e|Multi-Key Backup| F[Multi-Key System - lib/multikey.ts] F --\u003e|Create Slots| D A --\u003e|Recovery| G[Recovery System - lib/recovery.ts] G --\u003e|Decrypt| D A --\u003e|Store/Retrieve| H[iCloud Keychain - react-native-keychain] H --\u003e|Sync| I[Apple Devices] A --\u003e|Transaction Approval| J[Hardware Key Support] J --\u003e|NFC/USB| K[FIDO2 Hardware Key] L[Localhost PRF - components/LocalhostPRF.tsx] --\u003e|WIP| A subgraph \"Core Flow\" E --\u003e D --\u003e F --\u003e H H --\u003e G --\u003e A end This chart illustrates:\nUser interactions starting from the main app. Flows for passkey handling, encryption, backup, and recovery. Connections to external systems like hardware keys and iCloud. If this explanation and chart meet your needs, please toggle to Act mode if you want me to implement changes or create files based on this. Otherwise, let me know if you’d like more details on specific parts.\nThis post was created via email by emin@nuri.com\n","wordCount":"649","inLanguage":"en","datePublished":"2025-08-28T08:30:02Z","dateModified":"2025-08-28T08:30:02Z","author":{"@type":"Person","name":"Emino"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://emino.app/posts/nuri-wallet-ios-expo-app-mermaid-chart-of-the-architecture/"},"publisher":{"@type":"Organization","name":"Emino Blog - AI-Optimized Tech Insights","logo":{"@type":"ImageObject","url":"https://emino.app/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://emino.app/ accesskey=h title="Emino Blog - AI-Optimized Tech Insights (Alt + H)">Emino Blog - AI-Optimized Tech Insights</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://emino.app/>Home</a>&nbsp;»&nbsp;<a href=https://emino.app/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Nuri Wallet iOS Expo App Mermaid Chart of the Architecture</h1><div class=post-meta><span title='2025-08-28 08:30:02 +0000 UTC'>August 28, 2025</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;649 words&nbsp;·&nbsp;Emino</div></header><div class=post-content><p>Based on my analysis of the codebase, including the README.md and the main
App.tsx file, I&rsquo;ll first provide a detailed explanation of the codebase.
Then, I&rsquo;ll include a Mermaid chart representing the application
architecture.</p><h3 id=codebase-explanation>Codebase Explanation</h3><p>This is a React Native Expo application called &ldquo;Nuri&rdquo; focused on
passkey-based Bitcoin seed encryption. It uses WebAuthn passkeys with the
PRF (Pseudo-Random Function) extension to securely encrypt Bitcoin seeds,
store them in iCloud Keychain, and enable recovery across multiple
passkeys. The app is designed for iOS 16+ devices with biometric
authentication (Face ID/Touch ID) and iCloud Keychain enabled.</p><h4 id=key-features>Key Features</h4><ul><li><strong>Passkey Creation and Authentication</strong>: Users create and sign in with
passkeys to derive encryption keys via PRF.</li><li><strong>Seed Encryption</strong>: Encrypts Bitcoin seeds using XChaCha20-Poly1305 with
keys derived from PRF.</li><li><strong>Multi-Key Backup</strong>: Supports backups decryptable by multiple passkeys
(version 3 format).</li><li><strong>iCloud Sync</strong>: Stores encrypted backups in iCloud Keychain with
per-user namespaces.</li><li><strong>Hardware Security Key Support</strong>: For transaction approval (e.g.,
YubiKey), though PRF is limited on iOS for hardware keys.</li><li><strong>Recovery</strong>: Allows decryption using any associated passkey or guardian
DEKs.</li></ul><h4 id=project-structure>Project Structure</h4><p>The codebase is organized as follows (based on the file listing and README):</p><ul><li><strong>Root Files</strong>: Configuration and entry points like <code>App.tsx</code> (main UI
and logic), <code>index.js</code> (React Native entry), <code>package.json</code>,
<code>tsconfig.json</code>, etc.</li><li><strong>lib/</strong>: Core utilities.<ul><li><code>crypto.ts</code>: Handles key derivation (HKDF-SHA256), encryption
(XChaCha20-Poly1305), PRF normalization.</li><li><code>multikey.ts</code>: Manages multi-key backups with key slots for multiple
passkeys.</li><li><code>recovery.ts</code>: Functions for detecting backup versions and recovering
seeds.</li><li><code>inAppLocalhostServer.ts</code>: Likely for in-app server (WIP).</li></ul></li><li><strong>components/</strong>: Reusable components.<ul><li><code>LocalhostPRF.tsx</code>: Component for localhost PRF server (work in
progress).</li></ul></li><li><strong>WebView Components</strong>:<ul><li><code>EmbeddedPRF.tsx</code>: For domain-bound passkey authentication.</li><li><code>CreatePasskeyWebView.tsx</code>: For creating new passkeys.</li></ul></li><li><strong>docs/</strong>: Extensive documentation and server examples (HTML files for
testing PRF, PWA, etc.).</li><li><strong>scripts/</strong>: e.g., <code>guardian-server.mjs</code> for guardian features.</li><li><strong>assets/</strong>: App icons and splash screens.</li></ul><h4 id=main-logic-from-apptsx>Main Logic (from App.tsx)</h4><p>The app&rsquo;s core is in <code>App.tsx</code>, which manages the UI and wallet state. It
includes:</p><ul><li>State management for PRF, DEK (Data Encryption Key), guardians, hardware
keys, and backups.</li><li>UI with steps for: creating passkeys, signing in, encrypting seeds,
storing in iCloud, adding recovery keys, and recovering seeds.</li><li>Integration with WebViews for passkey operations (domain-bound to <code>passkey.nuri.com</code>).</li><li>Hardware key support for transaction approval (using NFC/USB keys).</li><li>Recovery flow that handles single-key (v1) and multi-key (v3) backups,
prompting users to select keys.</li></ul><h4 id=security-and-limitations>Security and Limitations</h4><ul><li>Encryption uses a master key encrypted in slots for each passkey.</li><li>Backups are stored per-user in iCloud Keychain with unique services
(e.g., <code>com.nuri.seed.backup.Alice</code>).</li><li>Limitations: PRF is device-specific; cross-device recovery requires
manual DEK sharing; iOS restricts PRF on hardware keys.</li></ul><h4 id=dependencies>Dependencies</h4><ul><li><code>react-native-passkey</code>: For WebAuthn.</li><li><code>react-native-keychain</code>: iCloud integration.</li><li><code>@noble/hashes</code>: Crypto primitives.</li><li>Others like <code>expo-random</code>, <code>react-native-webview</code>.</li></ul><p>The codebase is a proof-of-concept with some WIP features (e.g., localhost
PRF, guardian recovery). It&rsquo;s MIT-licensed and emphasizes security warnings.</p><h3 id=mermaid-chart-of-the-architecture>Mermaid Chart of the Architecture</h3><p>Below is a Mermaid flowchart representing the high-level architecture and
flow. It shows the main components and how they interact in the
encryption/recovery process.</p><pre tabindex=0><code class=language-mermaid data-lang=mermaid>graph TD
    A[User Interface - App.tsx] --&gt;|Create/Sign In| B[WebView Components]
    B --&gt;|Passkey Operations| C[Passkey API - react-native-passkey]
    A --&gt;|Encrypt/Decrypt| D[Crypto Library - lib/crypto.ts]
    D --&gt;|Key Derivation| E[PRF Extension]
    A --&gt;|Multi-Key Backup| F[Multi-Key System - lib/multikey.ts]
    F --&gt;|Create Slots| D
    A --&gt;|Recovery| G[Recovery System - lib/recovery.ts]
    G --&gt;|Decrypt| D
    A --&gt;|Store/Retrieve| H[iCloud Keychain - react-native-keychain]
    H --&gt;|Sync| I[Apple Devices]
    A --&gt;|Transaction Approval| J[Hardware Key Support]
    J --&gt;|NFC/USB| K[FIDO2 Hardware Key]
    L[Localhost PRF - components/LocalhostPRF.tsx] --&gt;|WIP| A
    subgraph &#34;Core Flow&#34;
        E --&gt; D --&gt; F --&gt; H
        H --&gt; G --&gt; A
    end
</code></pre><p>This chart illustrates:</p><ul><li>User interactions starting from the main app.</li><li>Flows for passkey handling, encryption, backup, and recovery.</li><li>Connections to external systems like hardware keys and iCloud.</li></ul><p>If this explanation and chart meet your needs, please toggle to Act mode if
you want me to implement changes or create files based on this. Otherwise,
let me know if you&rsquo;d like more details on specific parts.</p><p><img alt=mermaid-chart-nuri-passkey-security loading=lazy src=/media/nuri-wallet-ios-expo-app-mermaid-chart-of-the-architecture/mermaid-chart-nuri-passkey-security.png></p><hr><p><em>This post was created via email by <a href=mailto:emin@nuri.com>emin@nuri.com</a></em></p></div><div class=lightning-tips style="margin:60px 0;padding:40px 0;border-top:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5"><p style="font-size:14px;color:#666;margin:0 0 8px;letter-spacing:.5px">SUPPORT VIA LIGHTNING</p><p style="font-family:monospace;font-size:16px;color:#000;margin:0 0 24px">emin@nuri.com</p><div style=display:flex;gap:12px;flex-wrap:wrap><button class=tip-btn data-amount=21 style="padding:8px 16px;background:0 0;color:#000;border:1px solid #000;font-size:14px;cursor:pointer">21 sats</button>
<button class=tip-btn data-amount=100 style="padding:8px 16px;background:0 0;color:#000;border:1px solid #000;font-size:14px;cursor:pointer">100 sats</button>
<button class=tip-btn data-amount=500 style="padding:8px 16px;background:0 0;color:#000;border:1px solid #000;font-size:14px;cursor:pointer">500 sats</button>
<button class=tip-btn data-amount=1000 style="padding:8px 16px;background:0 0;color:#000;border:1px solid #000;font-size:14px;cursor:pointer">1k sats</button>
<button class=tip-btn data-amount=5000 style="padding:8px 16px;background:0 0;color:#000;border:1px solid #000;font-size:14px;cursor:pointer">5k sats</button></div><p id=webln-status style="font-size:12px;color:#999;margin:16px 0 0"></p></div><style>.tip-btn:hover{background:#f7931a !important;border-color:#f7931a !important;color:#fff !important}</style><script src=/js/lightning-webln.js></script><footer class=post-footer><nav class=paginav><a class=next href=https://emino.app/posts/passing-facebooks-technical-interview-2017/><span class=title>Next »</span><br><span>Passing Facebooks Technical Interview 2017</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://emino.app/>Emino Blog - AI-Optimized Tech Insights</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg></a><div class=lightning-tips style="margin:60px 0;padding:40px 0;border-top:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5"><p style="font-size:14px;color:#666;margin:0 0 8px;letter-spacing:.5px">SUPPORT VIA LIGHTNING</p><p style="font-family:monospace;font-size:16px;color:#000;margin:0 0 24px">emin@nuri.com</p><div style=display:flex;gap:12px;flex-wrap:wrap><button class=tip-btn data-amount=21 style="padding:8px 16px;background:0 0;color:#000;border:1px solid #000;font-size:14px;cursor:pointer;transition:all .2s">21 sats</button>
<button class=tip-btn data-amount=100 style="padding:8px 16px;background:0 0;color:#000;border:1px solid #000;font-size:14px;cursor:pointer;transition:all .2s">100 sats</button>
<button class=tip-btn data-amount=500 style="padding:8px 16px;background:0 0;color:#000;border:1px solid #000;font-size:14px;cursor:pointer;transition:all .2s">500 sats</button>
<button class=tip-btn data-amount=1000 style="padding:8px 16px;background:0 0;color:#000;border:1px solid #000;font-size:14px;cursor:pointer;transition:all .2s">1k sats</button>
<button class=tip-btn data-amount=5000 style="padding:8px 16px;background:0 0;color:#000;border:1px solid #000;font-size:14px;cursor:pointer;transition:all .2s">5k sats</button></div><p id=webln-status style="font-size:12px;color:#999;margin:16px 0 0"></p></div><style>.tip-btn:hover{background:#f7931a !important;border-color:#f7931a !important;color:#fff !important}</style><script src=/js/lightning-webln.js></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>